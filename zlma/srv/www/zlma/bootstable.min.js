"use strict";var params=null,colsEdi=null,newColHtml='<div class="btn-group pull-right"><button id="bEdit" type="button" class="btn btn-sm btn-default" onclick="butRowEdit(this);"><span class="glyphicon glyphicon-pencil" > </span></button><button id="bElim" type="button" class="btn btn-sm btn-default" onclick="butRowDelete(this);"><span class="glyphicon glyphicon-trash" > </span></button><button id="bAcep" type="button" class="btn btn-sm btn-default" style="display:none;" onclick="butRowAcep(this);"><span class="glyphicon glyphicon-ok" > </span></button><button id="bCanc" type="button" class="btn btn-sm btn-default" style="display:none;" onclick="butRowCancel(this);"><span class="glyphicon glyphicon-remove" > </span></button></div>',newColHtml2='<div class="btn-group pull-right"><button id="bEdit" type="button" class="btn btn-sm btn-default" onclick="butRowEdit(this);"><span class="glyphicon glyphicon-pencil" > ✎ </span></button><button id="bElim" type="button" class="btn btn-sm btn-default" onclick="butRowDelete(this);"><span class="glyphicon glyphicon-trash" > X </span></button><button id="bAcep" type="button" class="btn btn-sm btn-default" style="display:none;" onclick="butRowAcep(this);"><span class="glyphicon glyphicon-ok" > ✓ </span></button><button id="bCanc" type="button" class="btn btn-sm btn-default" style="display:none;" onclick="butRowCancel(this);"><span class="glyphicon glyphicon-remove" > → </span></button></div>',colEdicHtml='<td name="buttons">'+newColHtml+"</td>";function IterarCamposEdit(t,n){var o=0;t.each(function(){o++,"buttons"!=$(this).attr("name")&&function(t){if(null==colsEdi)return!0;for(var n=0;n<colsEdi.length;n++)if(t==colsEdi[n])return!0;return!1}(o-1)&&n($(this))})}function ModoEdicion(t){return"editing"==t.attr("id")}function SetButtonsNormal(t){$(t).parent().find("#bAcep").hide(),$(t).parent().find("#bCanc").hide(),$(t).parent().find("#bEdit").show(),$(t).parent().find("#bElim").show(),$(t).parents("tr").attr("id","")}function SetButtonsEdit(t){$(t).parent().find("#bAcep").show(),$(t).parent().find("#bCanc").show(),$(t).parent().find("#bEdit").hide(),$(t).parent().find("#bElim").hide(),$(t).parents("tr").attr("id","editing")}function butRowAcep(t){var n=$(t).parents("tr"),o=n.find("td");ModoEdicion(n)&&(IterarCamposEdit(o,function(t){var n=t.find("input").val();t.html(n)}),SetButtonsNormal(t),params.onEdit(n))}function butRowCancel(t){var n=$(t).parents("tr"),o=n.find("td");ModoEdicion(n)&&(IterarCamposEdit(o,function(t){var n=t.find("div").html();t.html(n)}),SetButtonsNormal(t))}function butRowEdit(t){var n=$(t).parents("tr"),o=n.find("td");if(!ModoEdicion(n)){var i=!1;IterarCamposEdit(o,function(t){var n=t.html(),o='<div style="display: none;">'+n+"</div>",a='<input class="form-control input-sm"  value="'+n+'">';t.html(o+a),i||(t.find("input").focus(),i=!0)}),SetButtonsEdit(t)}}function butRowDelete(t){var n=$(t).parents("tr");params.onBeforeDelete(n),n.remove(),params.onDelete()}function rowAddNew(t,n=[]){var o=$("#"+t),i=(o.find("tbody tr"),o.find("thead tr").find("th")),a="",s=0;i.each(function(){"buttons"==$(this).attr("name")?a+=colEdicHtml:s<n.length?a=a+"<td>"+n[s]+"</td>":a+="<td></td>",s++}),o.find("tbody").append("<tr>"+a+"</tr>"),params.onAdd()}function rowAddNewAndEdit(t,n=[]){rowAddNew(t,n),butRowEdit($("#"+t+" tr:last").find("#bEdit"))}function TableToCSV(t,n){var o="",i="";return $("#"+t).find("tbody tr").each(function(){ModoEdicion($(this))&&$(this).find("#bAcep").click();var t=$(this).find("td");o="",t.each(function(){"buttons"==$(this).attr("name")||(o=o+$(this).html()+n)}),""!=o&&(o=o.substr(0,o.length-n.length)),i=i+o+"\n"}),i}function TableToJson(t){var n="{",o=[];$("#"+t+" tr").each(function(t){var n=$(this).children(),i=[];n.each(function(){i.push('"'+$(this).text()+'"')}),o.push('"'+t+'": ['+i.join(",")+"]")});return n+=o.join(",")+"}"}$.fn.SetEditable=function(t){params=$.extend({columnsEd:null,$addButton:null,bootstrap:!0,onEdit:function(){},onBeforeDelete:function(){},onDelete:function(){},onAdd:function(){}},t);var n=this;n.find("thead tr").append('<th name="buttons"></th>'),params.bootstrap||(colEdicHtml='<td name="buttons">'+newColHtml2+"</td>"),n.find("tbody tr").append(colEdicHtml),null!=params.$addButton&&params.$addButton.click(function(){rowAddNew(n.attr("id"))}),null!=params.columnsEd&&(colsEdi=params.columnsEd.split(","))};